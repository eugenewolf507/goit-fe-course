"use strict";var urlInputForm=document.querySelector("#urlInputForm"),urlsList=[],apiKey="5bbc427db184bade881089c46d1ce94309e553dcca374";function addUrl(t){t.preventDefault(),linkpreviewAPI(urlInputForm.urlInput.value).then(function(t){urlsList.some(function(e){return e===t.url})?alert("Такая закладка уже есть"):(urlsList.unshift(t.url),localStorage.setItem("urlsList",JSON.stringify(urlsList)),outputHandlebars(t))}),urlInputForm.reset()}function deleteCard(t){var e=t.parentElement.parentElement,r=e.querySelector("h3").textContent,n=urlsList.indexOf(r);urlsList.splice(n,1),localStorage.setItem("urlsList",JSON.stringify(urlsList)),e.remove()}function linkpreviewAPI(t){return fetch("https://api.linkpreview.net/?key="+apiKey+"&q="+t).then(function(t){if(t.ok)return t.json();throw new Error("Error fetching data")}).catch(function(t){console.error("Error: ",t)})}function outputHandlebars(t){var e=document.querySelector("#output").innerHTML.trim(),r=Handlebars.compile(e)(t),n=document.querySelector("#output-container");n.innerHTML=r+n.innerHTML}(urlsList=JSON.parse(localStorage.getItem("urlsList"))).forEach(function(t){linkpreviewAPI(t).then(function(t){outputHandlebars(t)})}),urlInputForm.addEventListener("submit",addUrl);